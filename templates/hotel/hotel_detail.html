
{% extends 'partials/base.html' %}
{% load static %}
{% block content %}

<style>
    .utf_booking_form_container {
        background-color: #fff;
        padding: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
    }

    .utf_section_heading {
        font-size: 24px;
        margin-bottom: 20px;
        font-weight: 600;
        color: #333;
    }

    .utf_input_container {
        margin-bottom: 15px;
    }

    .utf_input_container label {
        font-size: 14px;
        font-weight: 500;
        color: #555;
    }

    .utf_progress_button {
        background-color: #4CAF50;
        color: white;
        font-size: 16px;
        padding: 10px 20px;
        border: none;
        width: 100%;
        cursor: pointer;
        border-radius: 5px;
        transition: background-color 0.3s ease;
    }

    .utf_progress_button:hover {
        background-color: #45a049;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
    }

</style>

        

<!-- Sidebar -->
<!-- <div class="col-lg-4 col-md-4 margin-top-75 sidebar-search"> -->
<div class="clearfix"></div>
<!-- Sidebar with booking form -->

<div class="col-lg-4">
    <div class=" booking_widget_box" style="border: 1px dashed rgba(42, 1, 119, 0.61); padding: 14px; border-radius: 10px;">
        <h3 class="utf_section_heading">Check Availability</h3>
        <form method="POST" action="{% url 'booking:check_room_availability' %}">
            {% csrf_token %}
            <input type="hidden" value="{{hotel.id}}" name="hotel_id" id="hotel_id">
            <!-- <div type="hidden" name="room_type" value="room_type_slug", id="room_type_slug">
                {{ form.room_type}}
            </div>     -->
            
            <div class="col-lg-12 col-md-12 utf_input_container">
                <label for="check_in_date">Check-in Date</label>
                {{ form.check_in_date }}
            </div>
            <div class="col-lg-12 col-md-12 utf_input_container">
                <label for="check_out_date">Check-out Date</label>
                {{ form.check_out_date }}
            </div>
            <!-- <div class="col-lg-12 col-md-12 utf_input_container">
                {{ form.room_type }}
            </div> -->
            <div class="col-lg-12 col-md-12 tf_input_container">
                <label for="select_room_type">Select Room Type</label>
                <select name="room_type" class="utf_chosen_select_single" required>
                    <!-- <option value="">Select Room</option> -->
                    {% for r in hotel.hotel_room_types %}
                        <option value="{{r.slug}}">{{r.type}}</option>
                    {% endfor %}
                    </select>
            </div>
            <div class="col-lg-12 col-md-12 utf_input_container">
                <label for="num_members">Select Number of Members</label>
                {{ form.num_members }}
            </div>
            <div class="col-lg-12 col-md-12 utf_input_container">
                <label for="num_children">Select Number of Children</label>
                {{ form.num_children }}
            </div>
            <div class="col-lg-12 col-md-12 utf_input_container">
                <label for="num_guests">Select Number of Guests</label>
                {{ form.num_guests }}
            </div>
            <button type="submit" class="utf_progress_button button fullwidth_block margin-top-5">
                Check Availability
            </button>
        </form>
    </div>
</div>         



        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
        <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        
        <!-- jQuery UI Datepicker initialization script -->
        <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
        <script>
            $(document).ready(function() {
                // Initialize the Datepicker for the check-in and check-out date inputs
                $("#id_check_in_date").datepicker({
                    dateFormat: "yy-mm-dd", // Format the date as YYYY-MM-DD
                    minDate: 0, // Prevent selecting past dates
                    onSelect: function(selectedDate) {
                        // Set the minimum date for the check-out field to be after the check-in date
                        var date = $(this).datepicker('getDate');
                        $("#id_check_out_date").datepicker("option", "minDate", date);
                    }
                });
        
                $("#id_check_out_date").datepicker({
                    dateFormat: "yy-mm-dd",
                    minDate: 0, // Prevent selecting past dates
                    onSelect: function(selectedDate) {
                        // Ensure the check-out date is after the check-in date
                        var checkInDate = $("#id_check_in_date").datepicker("getDate");
                        if (checkInDate && new Date(selectedDate) <= checkInDate) {
                            alert("Check-out date must be after check-in date.");
                            $(this).datepicker("setDate", null); // Clear the invalid date
                        }
                    }
                });
            });
        </script>
        
        <!-- Flatpickr initialization script -->
        <script>
            // Initialize Flatpickr on the check-in and check-out date inputs
            flatpickr("#id_check_in_date", {
                dateFormat: "Y-m-d",
                minDate: "today", // Prevent selecting past dates
            });
            flatpickr("#id_check_out_date", {
                dateFormat: "Y-m-d",
                minDate: "today", // Prevent selecting past dates
                onChange: function(selectedDates, dateStr, instance) {
                    // Ensure check-out date is always after check-in date
                    const checkInDate = document.getElementById('id_check_in_date').value;
                    if (checkInDate && selectedDates[0] <= new Date(checkInDate)) {
                        alert("Check-out date must be after check-in date.");
                        instance.clear();
                    }
                }
            });
        </script>
{% endblock content %}

